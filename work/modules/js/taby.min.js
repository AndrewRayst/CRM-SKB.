export default ( tabList, tabBtn ) => {

	if ( typeof tabList !== "object" ) tabList = document.querySelector(tabList)
	if ( typeof tabBtn !== "object" ) tabBtn = document.querySelector(tabBtn)

	const tabBtns = toArray( tabBtn.children )
	const tabPanels = toArray( tabList.children )

	function toArray( arr ) {

		let newArr = []

		for ( let i = 0; i < arr.length; i++ ) newArr.push( arr[i] )

		return newArr

	}

	function init() {

		let userActive = false;

		tabBtn.classList.add(`taby__btns`)
		tabList.classList.add(`taby__panels`)

		for( let panel of tabPanels ) panel.classList.add('taby__panel') 

		for( let btn in tabBtns ) {

			tabBtns[btn].classList.add('taby__btn')

			if ( tabBtns[btn].classList.contains('taby__btn-active') ) {

				userActive = true

				return btn

			}
		
		}

		if (!userActive) {

			tabBtns[0].classList.add('taby__btn-active') 

			return 0

		}


	}
	

	function tabTransform( btnActiveIndex, event ) {

		if ( event !== undefined && !event.currentTarget.classList.contains(`taby__btn-active`)) {

			for ( let btn of tabBtns ) {

				btn.classList.remove(`taby__btn-active`)

			}

			event.currentTarget.classList.add(`taby__btn-active`)

		}
		
		for( let panel in tabPanels ) {

			tabPanels[panel].style.transform = `translateX(${(100 * panel) - (btnActiveIndex * 100)}%)`

			tabPanels[panel].classList.remove(`taby__panel-active`)
		
		}

		tabPanels[btnActiveIndex].classList.add(`taby__panel-active`)

	}

	tabTransform( init() )

	for( let index in tabBtns ) {

		tabBtns[index].addEventListener( `click`, event => tabTransform( index, event ) )

	}

}